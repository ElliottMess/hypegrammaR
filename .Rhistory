source('C:/Users/Visitor/hypegrammaR/./R/input_sanitation.R')
source('C:/Users/Visitor/hypegrammaR/./R/summary_statistics.R')
source('C:/Users/Visitor/hypegrammaR/./R/summary_statistics.R')
debug(input_sanitation)
debug(sanitise_group_difference)
analyse_indicator(data,
dependent.var ="VAR.3...date",
independent.var = "VAR.11...enter.the.survey.site." ,
# hypothesis.type =  x["hypothesis.type"],
sampling.strategy.cluster = FALSE,
sampling.strategy.stratified = FALSE,
case="CASE_group_difference_categorical_categorical"
)
Q]
independent.var
data[[dependent.var]]
dependent.var<-data$VAR.3...date
dependent.var<-"VAR.3...date"
ndependent.var
dependent.var
independent.var
table(list(data[[independent.var]], data[[dependent.var]]))
independent.var<-"VAR.11...enter.the.survey.site."
table(list(data[[independent.var]], data[[dependent.var]]))
table(list(data[[independent.var]], data[[dependent.var]])) %>% sapply(function(x){x==0})
table(list(data[[independent.var]], data[[dependent.var]])) %>% apply(2,function(x){x==0})
table(list(data[[independent.var]], data[[dependent.var]])) %>% apply(2,function(x){x!=0})
table(list(data[[independent.var]], data[[dependent.var]])) %>% apply(2,function(x){x!=0}) %>% apply(2,function(x){length(which(x))>=2})
table(list(data[[independent.var]], data[[dependent.var]])) %>% apply(2,function(x){x!=0}) %>% apply(1,function(x){length(which(x))>=2})
dependent.var<-"VAR.3...date"
independent.var<-"VAR.11...enter.the.survey.site."
table(list(data[[independent.var]], data[[dependent.var]])) %>%
apply(2,function(x){x!=0}) %>%
apply(2,function(x){length(which(x))>=2})
at_least_two_table(list(data[[independent.var]], data[[dependent.var]])) %>%
apply(2,function(x){x>1}) %>%
apply(2,function(x){length(which(x))>=2})
at_least_two_table(list(data[[independent.var]], data[[dependent.var]])) %>%
apply(2,function(x){x>0}) %>%
apply(2,function(x){length(which(x))>=2})
Q
at_least_two <-table(list(data[[independent.var]], data[[dependent.var]])) %>%
apply(2,function(x){x>0}) %>%
apply(2,function(x){length(which(x))>=2})
at_least_two_independent_per_dependent<-table(list(data[[independent.var]], data[[dependent.var]])) %>%
apply(2,function(x){x!=0}) %>%
apply(1,function(x){length(which(x))>=2})
at_least_two_dependent_per_independent
at_least_two_dependent_per_independent <-table(list(data[[independent.var]], data[[dependent.var]])) %>%
apply(2,function(x){x>0}) %>%
apply(2,function(x){length(which(x))>=2})
at_least_two_independent_per_dependent<-table(list(data[[independent.var]], data[[dependent.var]])) %>%
apply(2,function(x){x!=0}) %>%
apply(1,function(x){length(which(x))>=2})
at_least_two_dependent_per_independent
at_least_two_dependent_per_independent %>% names[which(at_least_two_dependent_per_independent)]
(at_least_two_dependent_per_independent %>% names)
which(at_least_two_dependent_per_independent)
(at_least_two_dependent_per_independent %>% names)[which(at_least_two_dependent_per_independent)]
allwoed_dependent_values<-(at_least_two_dependent_per_independent %>% names)[which(at_least_two_dependent_per_independent)]
allowed_dependent_values<-(at_least_two_dependent_per_independent %>% names)[which(at_least_two_dependent_per_independent)]
data$VAR.3...date %in% allowed_dependent_values
data_at_least_two_dependent_per_independent<-data[data$VAR.3...date %in% allowed_dependent_values,]
analyse_indicator(data_at_least_two_dependent_per_independent,
dependent.var ="VAR.3...date",
independent.var = "VAR.11...enter.the.survey.site." ,
# hypothesis.type =  x["hypothesis.type"],
sampling.strategy.cluster = FALSE,
sampling.strategy.stratified = FALSE,
case="CASE_group_difference_categorical_categorical"
)
allowed_dependent_values<-(at_least_two_independent_per_dependent %>% names)[which(at_least_two_independent_per_dependent)]
allowed_independent_values<-(at_least_two_independent_per_dependent %>% names)[which(at_least_two_independent_per_dependent)]
allowed_independent_values<-(at_least_two_independent_per_dependent %>% names)[which(at_least_two_independent_per_dependent)]
data_at_least_two_independent_per_dependent<-data[data$VAR.3...date %in% allowed_independent_values,]
analyse_indicator(data_at_least_two_independent_per_dependent,
dependent.var ="VAR.3...date",
independent.var = "VAR.11...enter.the.survey.site." ,
# hypothesis.type =  x["hypothesis.type"],
sampling.strategy.cluster = FALSE,
sampling.strategy.stratified = FALSE,
case="CASE_group_difference_categorical_categorical"
)
at_least_two_independent_per_dependent<-table(list(data[[independent.var]], data[[dependent.var]])) %>%
apply(2,function(x){x!=0}) %>%
apply(1,function(x){length(which(x))>=2})
at_least_two_independent_per_dependent
allowed_independent_values<-(at_least_two_independent_per_dependent %>% names)[which(at_least_two_independent_per_dependent)]
allowed_independent_values
dependent.var
independent.var
data_at_least_two_independent_per_dependent<-data[data[[independent.var]] %in% allowed_independent_values,]
analyse_indicator(data_at_least_two_independent_per_dependent,
dependent.var ="VAR.3...date",
independent.var = "VAR.11...enter.the.survey.site." ,
# hypothesis.type =  x["hypothesis.type"],
sampling.strategy.cluster = FALSE,
sampling.strategy.stratified = FALSE,
case="CASE_group_difference_categorical_categorical"
)
data_at_least_two_independent_per_dependent
ct<-function(...){
table(list(...))
}
ctdi<-function(){
ct(data[[dependent.var]],data[[independent.var]])
}
ctdi()
ct<-function(...){
table(list(...))
}
ct(data_at_least_two_independent_per_dependent[[independent.var]],data_at_least_two_independent_per_dependent[[dependent.var]])
debug(percent_with_confints)
analyse_indicator(data_at_least_two_independent_per_dependent,
dependent.var ="VAR.3...date",
independent.var = "VAR.11...enter.the.survey.site." ,
# hypothesis.type =  x["hypothesis.type"],
sampling.strategy.cluster = FALSE,
sampling.strategy.stratified = FALSE,
case="CASE_group_difference_categorical_categorical"
)
data$VAR.3...date
ct(data[[dependent.var]],data[[independent.var]])
svyby(formula(formula_err), formula(by), design, na.rm = T, svymean)
data %>% class
formulat_err
formula_err
svymean(formula_err,design)
svymean(formula_err,design,na.rm=T)
svymean(formula_err,design,na.rm=T)
svytable(formula_err,design)
svytable(formula_err,design)
formula_err
svymean(formula(formula_err),design)
by
svyby(formula(formula_err), formula(by), design, na.rm = T, sum)
svyby(formula(formula_err), formula(by), design, na.rm = T, svymean)
svyby(formula(formula_err), formula(by), design, na.rm = T, svytable)
svyby(formula(formula_err), formula(by), design, svytable)
debug(svyby)
svyby(formula(formula_err), formula(by), design, svytable)
svyby(formula(formula_err), formula(by), design, svymean)
dropped
dropped %>% which
uniques
results
covmats
is.factor(data$VAR.3...date)
is.factor(data$VAR.11...enter.the.survey.site.)
analyse_indicator(data,
dependent.var ="VAR.3...date",
independent.var = "VAR.11...enter.the.survey.site." ,
# hypothesis.type =  x["hypothesis.type"],
sampling.strategy.cluster = FALSE,
sampling.strategy.stratified = FALSE,
case="CASE_group_difference_categorical_categorical"
)
svyby(formula(formula_err), formula(by), design, na.rm = T, svymean)
undebug(svyby)
undebug(svyby)
analyse_indicator(data,
dependent.var ="VAR.3...date",
independent.var = "VAR.11...enter.the.survey.site." ,
# hypothesis.type =  x["hypothesis.type"],
sampling.strategy.cluster = FALSE,
sampling.strategy.stratified = FALSE,
case="CASE_group_difference_categorical_categorical"
)
svyby(formula(formula_err), formula(by), design, na.rm = T, svymean)
undebug(percent_with_confints)
undebug(sanitise_group_difference)
undebug(percent_with_confints)
undebug(sanitise_group_difference)
analyse_indicator(data,
dependent.var ="VAR.3...date",
independent.var = "VAR.11...enter.the.survey.site." ,
# hypothesis.type =  x["hypothesis.type"],
sampling.strategy.cluster = FALSE,
sampling.strategy.stratified = FALSE,
case="CASE_group_difference_categorical_categorical"
)
dependent.var<-"VAR.3...date"
independent.var<-"VAR.11...enter.the.survey.site."
at_least_two_dependent_per_independent <-table(list(data[[independent.var]], data[[dependent.var]])) %>%
apply(2,function(x){x>0}) %>%
apply(2,function(x){length(which(x))>=2})
allowed_dependent_values<-(at_least_two_dependent_per_independent %>% names)[which(at_least_two_dependent_per_independent)]
at_least_two_independent_per_dependent<-table(list(data[[independent.var]], data[[dependent.var]])) %>%
apply(2,function(x){x!=0}) %>%
apply(1,function(x){length(which(x))>=2})
allowed_independent_values<-(at_least_two_independent_per_dependent %>% names)[which(at_least_two_independent_per_dependent)]
allowed_independent_values
data_at_least_two_independent_per_dependent<-data[data[[independent.var]] %in% allowed_independent_values,]
data_at_least_two_independent_per_dependent
at_least_two_dependent_per_independent <-table(list(data[[independent.var]], data[[dependent.var]])) %>%
apply(2,function(x){x>0}) %>%
apply(2,function(x){length(which(x))>=2})
dependent.var<-"VAR.3...date"
independent.var<-"VAR.11...enter.the.survey.site."
at_least_two_dependent_per_independent <-table(list(data[[independent.var]], data[[dependent.var]])) %>%
apply(2,function(x){x>0}) %>%
apply(2,function(x){length(which(x))>=2})
allowed_dependent_values<-(at_least_two_dependent_per_independent %>% names)[which(at_least_two_dependent_per_independent)]
data_at_least_two_dependent_per_independent<-data[data$VAR.3...date %in% allowed_dependent_values,]
at_least_two_independent_per_dependent<-table(list(data[[independent.var]], data[[dependent.var]])) %>%
apply(2,function(x){x!=0}) %>%
apply(1,function(x){length(which(x))>=2})
allowed_independent_values<-(at_least_two_independent_per_dependent %>% names)[which(at_least_two_independent_per_dependent)]
data_at_least_two_independent_per_dependent<-data_at_least_two_dependent_per_independent[data_at_least_two_dependent_per_independent[[independent.var]] %in% allowed_independent_values,]
data_at_least_two_all<-data_at_least_two_dependent_per_independent[data_at_least_two_dependent_per_independent[[independent.var]] %in% allowed_independent_values,]
data_at_least_two_independent_per_dependent
data_at_least_two_independent_per_dependent
ct(data_at_least_two_independent_per_dependent[[independent.var]])
ct(data_at_least_two_independent_per_dependent[[independent.var]],data_at_least_two_independent_per_dependent[[dependent.var]])
at_least_two_dependent_per_independent <-table(list(data[[independent.var]], data[[dependent.var]])) %>%
apply(2,function(x){x>0}) %>%
apply(2,function(x){length(which(x))>=2})
allowed_dependent_values<-(at_least_two_dependent_per_independent %>% names)[which(at_least_two_dependent_per_independent)]
data_at_least_two_dependent_per_independent<-data[data$VAR.3...date %in% allowed_dependent_values,]
ct(data_at_least_two_dependent_per_independent[[independent.var]],data_at_least_two_dependent_per_independent[[dependent.var]])
at_least_two_independent_per_dependent<-table(list(data[[independent.var]], data[[dependent.var]])) %>%
apply(2,function(x){x!=0}) %>%
apply(1,function(x){length(which(x))>=2})
allowed_independent_values<-(at_least_two_independent_per_dependent %>% names)[which(at_least_two_independent_per_dependent)]
data_at_least_two_all<-data_at_least_two_dependent_per_independent[data_at_least_two_dependent_per_independent[[independent.var]] %in% allowed_independent_values,]
data_at_least_two_independent_per_dependent
ct(data_at_least_two_independent_per_dependent[[independent.var]],data_at_least_two_independent_per_dependent[[dependent.var]])
analyse_indicator(data_at_least_two_independent_per_dependent,
dependent.var ="VAR.3...date",
independent.var = "VAR.11...enter.the.survey.site." ,
# hypothesis.type =  x["hypothesis.type"],
sampling.strategy.cluster = FALSE,
sampling.strategy.stratified = FALSE,
case="CASE_group_difference_categorical_categorical"
)
at_least_two_dependent_per_independent <-table(list(data[[independent.var]], data[[dependent.var]])) %>%
apply(2,function(x){x>0}) %>%
apply(2,function(x){length(which(x))>=2})
allowed_dependent_values<-(at_least_two_dependent_per_independent %>% names)[which(at_least_two_dependent_per_independent)]
data_at_least_two_dependent_per_independent<-data[data$VAR.3...date %in% allowed_dependent_values,]
data_at_least_two_dependent_per_independent
ct(data_at_least_two_dependent_per_independent[[independent.var]],data_at_least_two_dependent_per_independent[[dependent.var]])
analyse_indicator(data_at_least_two_dependent_per_independent,
dependent.var ="VAR.3...date",
independent.var = "VAR.11...enter.the.survey.site." ,
# hypothesis.type =  x["hypothesis.type"],
sampling.strategy.cluster = FALSE,
sampling.strategy.stratified = FALSE,
case="CASE_group_difference_categorical_categorical"
)
analyse_indicator(data_at_least_two_independent_per_dependent,
dependent.var ="VAR.3...date",
independent.var = "VAR.11...enter.the.survey.site." ,
# hypothesis.type =  x["hypothesis.type"],
sampling.strategy.cluster = FALSE,
sampling.strategy.stratified = FALSE,
case="CASE_group_difference_categorical_categorical"
)
ct(data_at_least_two_independent_per_dependent[[independent.var]],data_at_least_two_independent_per_dependent[[dependent.var]])
allowed_independent_values<-(at_least_two_independent_per_dependent %>% names)[which(at_least_two_independent_per_dependent)]
data_at_least_two_all<-data_at_least_two_dependent_per_independent[data_at_least_two_dependent_per_independent[[independent.var]] %in% allowed_independent_values,]
data_at_least_two_independent_per_dependent
ct(data_at_least_two_independent_per_dependent[[independent.var]],data_at_least_two_independent_per_dependent[[dependent.var]])
ct(data_at_least_two_independent_per_dependent[[independent.var]],data_at_least_two_independent_per_dependent[[dependent.var]])
at_least_two_independent_per_dependent<-table(list(data[[independent.var]], data[[dependent.var]])) %>%
apply(2,function(x){x!=0}) %>%
apply(1,function(x){length(which(x))>=2})
at_least_two_independent_per_dependent<-table(list(data[[independent.var]], data[[dependent.var]])) %>%
apply(2,function(x){x!=0}) %>%
apply(1,function(x){length(which(x))>=2})
allowed_independent_values<-(at_least_two_independent_per_dependent %>% names)[which(at_least_two_independent_per_dependent)]
data_at_least_two_all<-data[data_at_least_two_dependent_per_independent[[independent.var]] %in% allowed_independent_values,]
data_at_least_two_independent_per_dependent
ct(data_at_least_two_independent_per_dependent[[independent.var]],data_at_least_two_independent_per_dependent[[dependent.var]])
table(list(data[[independent.var]], data[[dependent.var]]))
table(list(data[[independent.var]], data[[dependent.var]])) %>%
apply(2,function(x){x!=0})
at_least_two_independent_per_dependent<-table(list(data[[independent.var]], data[[dependent.var]])) %>%
apply(2,function(x){x!=0}) %>%
apply(2,function(x){length(which(x))>=2})
allowed_independent_values<-(at_least_two_independent_per_dependent %>% names)[which(at_least_two_independent_per_dependent)]
allowed_independent_values
at_least_two_independent_per_dependent
(at_least_two_independent_per_dependent %>% names)[which(at_least_two_independent_per_dependent)]
at_least_two_independent_per_dependent<-table(list(data[[independent.var]], data[[dependent.var]])) %>%
apply(2,function(x){x!=0}) %>%
apply(2,function(x){length(which(x))>=2})
at_least_two_independent_per_dependent
allowed_dependent_values<-(at_least_two_independent_per_dependent %>% names)[which(at_least_two_independent_per_dependent)]
allowed_dependent_values
data_at_least_two_all<-data[data[[independent.var]] %in% allowed_independent_values,]
data_at_least_two_independent_per_dependent<-data[data[[independent.var]] %in% allowed_independent_values,]
analyse_indicator(data_at_least_two_independent_per_dependent,
dependent.var ="VAR.3...date",
independent.var = "VAR.11...enter.the.survey.site." ,
# hypothesis.type =  x["hypothesis.type"],
sampling.strategy.cluster = FALSE,
sampling.strategy.stratified = FALSE,
case="CASE_group_difference_categorical_categorical"
)
at_least_two_independent_per_dependent<-table(list(data[[independent.var]], data[[dependent.var]])) %>%
apply(2,function(x){x!=0}) %>%
apply(2,function(x){length(which(x))>=2})
at_least_two_independent_per_dependent
allowed_dependent_values<-(at_least_two_independent_per_dependent %>% names)[which(at_least_two_independent_per_dependent)]
allowed_dependent_values
data_at_least_two_independent_per_dependent<-data[data[[dependent.var]] %in% allowed_independent_values,]
data_at_least_two_independent_per_dependent
ct(data_at_least_two_independent_per_dependent[[independent.var]],data_at_least_two_independent_per_dependent[[dependent.var]])
analyse_indicator(data_at_least_two_independent_per_dependent,
dependent.var ="VAR.3...date",
independent.var = "VAR.11...enter.the.survey.site." ,
# hypothesis.type =  x["hypothesis.type"],
sampling.strategy.cluster = FALSE,
sampling.strategy.stratified = FALSE,
case="CASE_group_difference_categorical_categorical"
)
ct(data_at_least_two_independent_per_dependent[[independent.var]],data_at_least_two_independent_per_dependent[[dependent.var]])
analyse_indicator(data_at_least_two_independent_per_dependent,
dependent.var ="VAR.3...date",
independent.var = "VAR.11...enter.the.survey.site." ,
# hypothesis.type =  x["hypothesis.type"],
sampling.strategy.cluster = FALSE,
sampling.strategy.stratified = FALSE,
case="CASE_group_difference_categorical_categorical"
)
debug(percent_with_confints)
analyse_indicator(data_at_least_two_independent_per_dependent,
dependent.var ="VAR.3...date",
independent.var = "VAR.11...enter.the.survey.site." ,
# hypothesis.type =  x["hypothesis.type"],
sampling.strategy.cluster = FALSE,
sampling.strategy.stratified = FALSE,
case="CASE_group_difference_categorical_categorical"
)
table(list(design$variables[[dependent.var]],design$variables[[independent.var]]))
design$variables %>% split.data.frame(design$veriables[[independent.var]]) %>% lapply(function(x){length(levels(as.factor(x[[dependent.var]])))})
design$variables %>% split.data.frame(design$variables[[independent.var]]) %>% lapply(function(x){length(levels(as.factor(x[[dependent.var]])))})
design$variables %>% split.data.frame(design$variables[[independent.var]]) %>% lapply(table)
design$variables %>% split.data.frame(design$variables[[independent.var]]) %>% lapply(.[[dependent.var]]) %>% lapply(table)
design$variables %>% split.data.frame(design$variables[[independent.var]]) %>% lapply(.[[dependent.var]]) %>% lapply(table)
design$variables %>% split.data.frame(design$variables[[independent.var]]) %>% lapply(function(x){x[[dependent.var]]}) %>% lapply(table)
design$variables %>% split.data.frame(design$variables[[independent.var]]) %>% lapply(function(x){x[[dependent.var]]}) %>% lapply(table) %>% lapply(length)
design$variables %>% split.data.frame(design$variables[[independent.var]]) %>% lapply(function(x){x[[dependent.var]]}) %>% lapply(table) %>% lapply(length) %>% lapply(function(x){x>1})
design$variables %>% split.data.frame(design$variables[[independent.var]]) %>% lapply(function(x){x[[dependent.var]]}) %>% lapply(table) %>% lapply(length) %>% lapply(function(x){x>1}) %>% unlist
SE(data$VAR.2...end)
SE(f.table)
data$VAR.11...enter.the.survey.site.=="Kutupalong RC "
data$VAR.11...enter.the.survey.site.=="Kutupalong RC" %>% table
data$VAR.11...enter.the.survey.site.=="Kutupalong RC" %>% table
(data$VAR.11...enter.the.survey.site.=="Kutupalong RC") %>% table
data[data$VAR.11...enter.the.survey.site.=="Kutupalong RC",] %>% map_to_design() ->design
svymean(~VAR.3...date,design)
res<-lapply(unique(data$VAR.11...enter.the.survey.site.),function(x){
data[data$VAR.11...enter.the.survey.site.==x,] %>% map_to_design() ->design
svymean(~VAR.3...date,design)
})
res<-lapply(unique(data$VAR.11...enter.the.survey.site.),function(x){
data[data$VAR.11...enter.the.survey.site.==x,] %>% map_to_design() ->design
print(table(design$variables$VAR.11...enter.the.survey.site.))
svymean(~VAR.3...date,design)
})
res<-lapply(unique(data$VAR.11...enter.the.survey.site.),function(x){
data[data$VAR.11...enter.the.survey.site.==x,] %>% map_to_design() ->design
print(table(design$variables$VAR.3...date))
svymean(~VAR.3...date,design)
})
?contrast
source('C:/Users/Visitor/hypegrammaR/./R/summary_statistics.R')
source('C:/Users/Visitor/hypegrammaR/./R/input_sanitation.R')
percent_with_confints <- function(dependent.var,
independent.var,
design,
na.rm = TRUE){
formula_string<-paste0("~",independent.var, "+",dependent.var )
f.table <- svytable(formula(formula_string), design)
# if(design$variables %>%
#    split.data.frame(design$variables[[independent.var]]) %>%
#    lapply(nrow) %>%
#    unlist %>%
#    (function(x){x<2}) %>%
#    any){
#       warning("independent var must have at least two unique values");return(NULL)
#     }
# formula_err <- paste0("~", dependent.var, sep = "")
# by <- paste0(" ~",independent.var , sep = "")
# summary.result.svyby <- svyby(formula(formula_err), formula(by), design, na.rm = T, svymean)
# # fix weird column names:
# colnames(summary.result.svyby)<-colnames(summary.result.svyby) %>% gsub(paste0("^se.",dependent.var),"",.) %>% gsub(paste0("^",dependent.var),"",.)
#
#
#
#
# # if(length(summary.result.svyby)==3 & length(summary.result.svyby[[2]])==2){return(list(ERROR="error calculating convidendce intervals. illformated output attached. might be that variable names too similar to other variable names. Try running again using design object without other variable columns."))}
# # pick out the columns that are the standard error
#
# independent.var.column<-1
# dependent.var.n<-(ncol(summary.result.svyby)-1)/2
# stat.columns<-2:(1+dependent.var.n)
# se.columns<-(max(stat.columns)+1):ncol(summary.result.svyby)
#
# standard_error <- summary.result.svyby[,c(independent.var.column,se.columns)] %>% melt(id.vars=c(independent.var))
# # colnames(standard_error)[which(colnames(standard_error)==independent.var)]<-"independent.var"
# stat <-         summary.result.svyby[,c(independent.var.column,stat.columns)] %>% melt(id.vars=c(independent.var))
#
#
# results<-list()
# results$independent.var.value <- stat[,independent.var]
# results$dependent.var.value <- stat[,"variable"]
# results$numbers <-stat[,"value"]
# results$se <- standard_error[,"value"]
# results$min <- results$numbers - results$se
# results$max <- results$numbers + results$se
results<-f.table
return(results)
}
results<-apply(analysisplan,1,function(x){
this_valid_data<-data[
which(
!(is.na(data[,x["dependent.var"]])) &
(!(is.na(data[,x["independent.var"]])))
),
]
if(length(grep("group_difference",x["case"])) > 0 ){
if(length(table(this_valid_data[,x["independent.var"]])) < 2 |
length(table(this_valid_data[,x["dependent.var"]])) < 2 |
length(unique(this_valid_data[,x["dependent.var"]]))==nrow(this_valid_data)){
return("depvar or indepvar less than 2 factors")
}
}
# print(table(this_valid_data[,x["dependent.var"]]))
# print(table(this_valid_data[,x["independent.var"]]))
# print(x["independent.var"])
print(x["dependent.var"])
# table(list(data[[x["dependent.var"]]],data[[x["independent.var"]]])) %>% table %>% print
analyse_indicator(this_valid_data,
dependent.var = x["dependent.var"],
independent.var = x["independent.var"] ,
# hypothesis.type =  x["hypothesis.type"],
sampling.strategy.cluster = FALSE,
sampling.strategy.stratified = TRUE,
case=x["case"]
)
})
names(results)<-analysisplan$dependent.var
results$VAR.247...if.you.wanted.to.complain.or.raise.a.problem.related.to.assistance.in.the.camps..where.would.you.go..info.points.or.help.desk$summary.statistic
results$VAR.19...what.is.your.relationship.to.the.head.of.family..1
results$VAR.77...what.is.the.main.source.of.fuel.your.family.uses.for.cooking.$summary.statistic
lapply(names(results),function(x){
print(results[[x]]$summary.statistic)
})
lapply(names(results),function(x){
print(x)
print(results[[x]]$summary.statistic)
})
results[["VAR.5...hello.my.name.is.........i.work.for.reach..together.with.unhcr..we.are.currently.conducting.a.survey.to.understand.the.needs.of.refugees.from.myanmar..we.would.like.to.know.more.about.the.needs.of.your.family.and.to.what.services.you.have.access..we.also.may.ask.you.a.few.questions.about.yourself.personally..the.survey.usually.takes.between.30.and.45.minutes.to.complete..any.information.that.you.provide.will.be.kept.anonymous..this.is.voluntary.and.you.can.choose.not.to.answer.any.or.all.of.the.questions.if.you.want..you.may.also.choose.to.quit.at.any.point..however..we.hope.that.you.will.participate.since.your.views.are.important..participation.in.the.survey.does.not.have.any.impact.on.whether.you.or.your.family.receive.assistance..do.you.have.any.questions..may.i.begin.now."]]
lapply(names(results),function(x){
print(x)
if(is.list(results[[x]])){
print(results[[x]]$summary.statistic)
}
})
debug(percent_with_confints)
summarystat_dfs<-lapply(names(results),function(x){
print(x)
if(is.list(results[[x]]))
reformat<-results[[x]]$summary.statistic %>% as.data.frame %>% data.frame(
rep(results[[x]]$hypothesis.test.result$test.results[2],nrow(results[[x]]$summary.statistic %>% as.data.frame)) %>% as.data.frame
)else{
reformat<-NULL
}
})
results<-apply(analysisplan,1,function(x){
this_valid_data<-data[
which(
!(is.na(data[,x["dependent.var"]])) &
(!(is.na(data[,x["independent.var"]])))
),
]
if(length(grep("group_difference",x["case"])) > 0 ){
if(length(table(this_valid_data[,x["independent.var"]])) < 2 |
length(table(this_valid_data[,x["dependent.var"]])) < 2 |
length(unique(this_valid_data[,x["dependent.var"]]))==nrow(this_valid_data)){
return("depvar or indepvar less than 2 factors")
}
}
# print(table(this_valid_data[,x["dependent.var"]]))
# print(table(this_valid_data[,x["independent.var"]]))
# print(x["independent.var"])
print(x["dependent.var"])
# table(list(data[[x["dependent.var"]]],data[[x["independent.var"]]])) %>% table %>% print
analyse_indicator(this_valid_data,
dependent.var = x["dependent.var"],
independent.var = x["independent.var"] ,
# hypothesis.type =  x["hypothesis.type"],
sampling.strategy.cluster = FALSE,
sampling.strategy.stratified = TRUE,
case=x["case"]
)
})
f.table
f.table
f.table %>% melt
f.table[1,] %>% melt
f.table[2,] %>% melt
f.table %>% melt
f.table
results %>% glimpse
source('C:/Users/Visitor/hypegrammaR/./R/summary_statistics.R')
source('C:/Users/Visitor/hypegrammaR/./R/summary_statistics.R')
debug(confidence_intervals_num_groups()
debug(confidence_intervals_num_groups)
